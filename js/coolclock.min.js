window.CoolClock=function(a){return this.init(a)};CoolClock.config={tickDelay:1000,longTickDelay:15000,defaultRadius:85,renderRadius:100,defaultSkin:"chunkySwiss",defaultFont:"15px sans-serif",skins:{swissRail:{outerBorder:{lineWidth:2,radius:95,color:"black",alpha:1},smallIndicator:{lineWidth:2,startAt:88,endAt:92,color:"black",alpha:1},largeIndicator:{lineWidth:4,startAt:79,endAt:92,color:"black",alpha:1},hourHand:{lineWidth:8,startAt:-15,endAt:50,color:"black",alpha:1},minuteHand:{lineWidth:7,startAt:-15,endAt:75,color:"black",alpha:1},secondHand:{lineWidth:1,startAt:-20,endAt:85,color:"red",alpha:1},secondDecoration:{lineWidth:1,startAt:70,radius:4,fillColor:"red",color:"red",alpha:1}},chunkySwiss:{outerBorder:{lineWidth:4,radius:97,color:"black",alpha:1},smallIndicator:{lineWidth:4,startAt:89,endAt:93,color:"black",alpha:1},largeIndicator:{lineWidth:8,startAt:80,endAt:93,color:"black",alpha:1},hourHand:{lineWidth:12,startAt:-15,endAt:60,color:"black",alpha:1},minuteHand:{lineWidth:10,startAt:-15,endAt:85,color:"black",alpha:1},secondHand:{lineWidth:4,startAt:-20,endAt:85,color:"red",alpha:1},secondDecoration:{lineWidth:2,startAt:70,radius:8,fillColor:"red",color:"red",alpha:1}},chunkySwissOnBlack:{outerBorder:{lineWidth:4,radius:97,color:"white",alpha:1},smallIndicator:{lineWidth:4,startAt:89,endAt:93,color:"white",alpha:1},largeIndicator:{lineWidth:8,startAt:80,endAt:93,color:"white",alpha:1},hourHand:{lineWidth:12,startAt:-15,endAt:60,color:"white",alpha:1},minuteHand:{lineWidth:10,startAt:-15,endAt:85,color:"white",alpha:1},secondHand:{lineWidth:4,startAt:-20,endAt:85,color:"red",alpha:1},secondDecoration:{lineWidth:2,startAt:70,radius:8,fillColor:"red",color:"red",alpha:1}}},isIE:!!document.all,clockTracker:{},noIdCount:0};CoolClock.tick=function(){for(var b in CoolClock.config.clockTracker){var a=CoolClock.config.clockTracker[b];if(a.stillHere()&&a.active){a.refreshDisplay()}}this.tickTimeout=setTimeout(CoolClock.tick,CoolClock.config.tickDelay)};CoolClock.prototype={init:function(a){this.canvasId=a.canvasId;this.skinId=a.skinId||CoolClock.config.defaultSkin;this.font=a.font||CoolClock.config.defaultFont;this.displayRadius=a.displayRadius||CoolClock.config.defaultRadius;this.renderRadius=a.renderRadius||CoolClock.config.renderRadius;this.showSecondHand=typeof a.showSecondHand=="boolean"?a.showSecondHand:true;this.gmtOffset=(a.gmtOffset!=null&&a.gmtOffset!="")?parseFloat(a.gmtOffset):null;this.showDigital=typeof a.showDigital=="boolean"?a.showDigital:false;this.showDigital24=typeof a.showDigital24=="boolean"?a.showDigital24:false;this.showDate=typeof a.showDate=="boolean"?a.showDate:false;this.logClock=typeof a.logClock=="boolean"?a.logClock:false;this.logClockRev=typeof a.logClock=="boolean"?a.logClockRev:false;this.tickDelay=CoolClock.config[this.showSecondHand?"tickDelay":"longTickDelay"];this.canvas=document.getElementById(this.canvasId);this.canvas.setAttribute("width",this.displayRadius*2);this.canvas.setAttribute("height",this.displayRadius*2);this.canvas.style.width=this.displayRadius*2+"px";this.canvas.style.maxWidth="100%";this.canvas.style.height="auto";this.scale=this.displayRadius/this.renderRadius;this.ctx=this.canvas.getContext("2d");this.ctx.scale(this.scale,this.scale);CoolClock.config.clockTracker[this.canvasId]=this;this.start();return this},fullCircleAt:function(a,c,b){this.ctx.save();this.ctx.globalAlpha=b.alpha;this.ctx.lineWidth=b.lineWidth;if(CoolClock.config.isIE){this.ctx.lineWidth=this.ctx.lineWidth*this.scale}this.ctx.beginPath();this.ctx.arc(a,c,b.radius,0,2*Math.PI,false);if(CoolClock.config.isIE){this.ctx.arc(a,c,b.radius,-0.1,0.1,false)}if(b.fillColor){this.ctx.fillStyle=b.fillColor;this.ctx.fill()}if(b.color){this.ctx.strokeStyle=b.color;this.ctx.stroke()}this.ctx.restore()},drawTextAt:function(b,a,e,d){if(!d){d=this.getSkin()}this.ctx.save();this.ctx.font=d.font||this.font;var c=this.ctx.measureText(b);if(!c.height){c.height=0;this.ctx.textBaseline="middle"}this.ctx.fillText(b,a-c.width/2,e-c.height/2);this.ctx.restore()},lpad2:function(a){return(a<10?"0":"")+a},tickAngle:function(a){var b=3;if(this.logClock){return a==0?0:(Math.log(a*b)/Math.log(60*b))}else{if(this.logClockRev){a=(60-a)%60;return 1-(a==0?0:(Math.log(a*b)/Math.log(60*b)))}else{return a/60}}},timeText:function(a,b,c,e,d){return""+(e?((a%12)==0?12:(a%12)):a)+":"+this.lpad2(b)+(d?":"+this.lpad2(c):"")+(e?(a<12?" am":" pm"):"")},radialLineAtAngle:function(b,a){this.ctx.save();this.ctx.translate(this.renderRadius,this.renderRadius);this.ctx.rotate(Math.PI*(2*b-0.5));this.ctx.globalAlpha=a.alpha;this.ctx.strokeStyle=a.color;this.ctx.lineWidth=a.lineWidth;if(CoolClock.config.isIE){this.ctx.lineWidth=this.ctx.lineWidth*this.scale}if(a.radius){this.fullCircleAt(a.startAt,0,a)}else{this.ctx.beginPath();this.ctx.moveTo(a.startAt,0);this.ctx.lineTo(a.endAt,0);this.ctx.stroke()}this.ctx.restore()},render:function(c,d,f,a){var j=this.getSkin();this.ctx.clearRect(0,0,this.renderRadius*2,this.renderRadius*2);if(j.outerBorder){this.fullCircleAt(this.renderRadius,this.renderRadius,j.outerBorder)}for(var e=0;e<60;e++){(e%5)&&j.smallIndicator&&this.radialLineAtAngle(this.tickAngle(e),j.smallIndicator);!(e%5)&&j.largeIndicator&&this.radialLineAtAngle(this.tickAngle(e),j.largeIndicator)}if(this.showDigital||this.showDigital24||this.showDate){var h;if(this.showDigital){h=this.timeText(c,d,f,true,false)}else{if(this.showDigital24){h=this.timeText(c,d,f,false,true)}else{h=a}}this.drawTextAt(h,this.renderRadius,this.renderRadius+this.renderRadius/2)}var k=(c%12)*5+d/12,b=d+f/60,g=f;if(j.hourHand){this.radialLineAtAngle(this.tickAngle(k),j.hourHand)}if(j.minuteHand){this.radialLineAtAngle(this.tickAngle(b),j.minuteHand)}if(this.showSecondHand&&j.secondHand){this.radialLineAtAngle(this.tickAngle(g),j.secondHand)}if(!CoolClock.config.isIE){if(j.hourDecoration){this.radialLineAtAngle(this.tickAngle(k),j.hourDecoration)}if(j.minDecoration){this.radialLineAtAngle(this.tickAngle(b),j.minDecoration)}if(this.showSecondHand&&j.secondDecoration){this.radialLineAtAngle(this.tickAngle(g),j.secondDecoration)}}},refreshDisplay:function(){var b=new Date();if(this.gmtOffset!=null){var a=new Date(b.valueOf()+(this.gmtOffset*1000*60*60));this.render(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.toLocaleDateString())}else{this.render(b.getHours(),b.getMinutes(),b.getSeconds(),b.toLocaleDateString())}},stillHere:function(){return document.getElementById(this.canvasId)!=null},stop:function(){this.active=false},start:function(){this.active=true},getSkin:function(){var a=CoolClock.config.skins[this.skinId];if(!a){a=CoolClock.config.skins[CoolClock.config.defaultSkin]}return a}};CoolClock.findAndCreateClocks=function(){var c=document.getElementsByTagName("canvas");for(var b=0;b<c.length;b++){var a=c[b].className.split(" ")[0].split(":");if(a[0]=="CoolClock"){if(!c[b].id){c[b].id="_coolclock_auto_id_"+CoolClock.config.noIdCount++}new CoolClock({canvasId:c[b].id,skinId:a[1],displayRadius:a[2],showSecondHand:a[3]!="noSeconds",gmtOffset:a[4],showDigital:a[5]=="showDigital",showDigital24:a[5]=="showDigital24",showDate:a[5]=="showDate",logClock:a[6]=="logClock",logClockRev:a[6]=="logClockRev"})}}CoolClock.tick()};if(window.jQuery){jQuery(document).ready(CoolClock.findAndCreateClocks)};